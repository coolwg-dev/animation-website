---
import BaseLayout from '../layouts/BaseLayout.astro';
import fs from 'fs';
const title = 'Fourier — Square Wave';

// Read video files from the public/videos folder at build / server render time.
const videoFolder = new URL('../../public/videos/fourier_square_wave', import.meta.url).pathname;
let videos = [];
try {
  videos = fs.readdirSync(videoFolder).filter(f => /\.(mp4|webm|ogg)$/i.test(f));
} catch (e) {
  videos = [];
}
---

<BaseLayout title={title}>
  <h2>Fourier — Square Wave</h2>
  <p>Animations that illustrate the Fourier series approximating a square wave.</p>

  <p><strong>Where to put videos</strong>: add your video files to <code>/public/videos/fourier_square_wave/</code>. Files placed there will be served at <code>/videos/fourier_square_wave/&lt;filename&gt;</code>.</p>

  {videos.length ? (
    <div>
      <h3>Videos</h3>
      <ul style="list-style:none;padding:0">
        {videos.map(v => (
          <li style="margin-bottom:1rem">
            <strong>{v}</strong>
            <div>
              <video controls width="640" src={`/videos/fourier_square_wave/${v}`}>Your browser doesn't support the video element.</video>
            </div>
          </li>
        ))}
      </ul>
    </div>
  ) : (
    <p>No videos found in <code>public/videos/fourier_square_wave/</code>. Add .mp4/.webm/.ogg files to that folder and refresh.</p>
  )}

</BaseLayout>
