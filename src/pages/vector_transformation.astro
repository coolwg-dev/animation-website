---
import BaseLayout from '../layouts/BaseLayout.astro';
import fs from 'fs';
const title = 'Vector transformation â€” Videos';

// Read video files from the public/videos folder at build / server render time.
const videoFolder = new URL('../../public/videos/vector_transformation', import.meta.url).pathname;
let videos = [];
try {
  videos = fs.readdirSync(videoFolder).filter(f => /\.(mp4|webm|ogg)$/i.test(f));
} catch (e) {
  videos = [];
}
---

<BaseLayout title={title}>
  <h2>Vector transformation videos</h2>
  <p>Animations and short clips that illustrate vector transformations (matrix operations, scaling, and more).</p>

  {videos.length ? (
    <div>
      <h3>Videos</h3>
      <ul style="list-style:none;padding:0">
        {videos.map(v => (
          <li style="margin-bottom:1rem">
            <strong>{v}</strong>
            <div style="margin-top:.5rem">
              <video controls width="640" src={`/videos/vector_transformation/${v}`}>Your browser doesn't support the video element.</video>
            </div>
          </li>
        ))}
      </ul>
    </div>
  ) : (
    <p>No videos found in <code>public/videos/vector_transformation/</code>. Add .mp4/.webm/.ogg files to that folder and refresh.</p>
  )}

</BaseLayout>
