---
import BaseLayout from '../layouts/BaseLayout.astro';
import fs from 'fs';
const title = 'Riemann sum (manim)';

const videoFolder = new URL('../../public/videos/riemann_sum_manim', import.meta.url).pathname;
let videos = [];
try {
  videos = fs.readdirSync(videoFolder).filter(f => /\.(mp4|webm|ogg)$/i.test(f));
} catch (e) {
  videos = [];
}
---

<BaseLayout title={title}>
  <h2>Riemann sum (manim)</h2>
  <p>Animations produced with Manim that show Riemann sums and integral approximations.</p>
  {videos.length ? (
    <div>
      <h3>Videos</h3>
      <ul style="list-style:none;padding:0">
        {videos.map(v => (
          <li style="margin-bottom:1rem">
            <strong>{v}</strong>
            <div>
              <video controls width="640" src={`/videos/riemann_sum_manim/${v}`}>Your browser doesn't support the video element.</video>
            </div>
          </li>
        ))}
      </ul>
    </div>
  ) : (
    <p>No videos found in <code>public/videos/riemann_sum_manim/</code>. Add .mp4/.webm/.ogg files to that folder and refresh.</p>
  )}

</BaseLayout>
 
